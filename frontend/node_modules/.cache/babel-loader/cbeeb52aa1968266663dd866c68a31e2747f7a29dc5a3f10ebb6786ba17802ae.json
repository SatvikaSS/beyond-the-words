{"ast":null,"code":"var _jsxFileName = \"D:\\\\beyond-the-words\\\\frontend\\\\src\\\\components\\\\SearchComponent.js\",\n  _s = $RefreshSig$();\n// SearchComponent.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport './SearchComponent.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchComponent = ({\n  onStorySelect\n}) => {\n  _s();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const [filters, setFilters] = useState({\n    age_group: '',\n    source: ''\n  });\n\n  // Use useRef to store the timeout ID\n  const searchTimeoutRef = useRef(null);\n  const availableFilters = {\n    age_groups: [{\n      value: '4-6',\n      label: '4-6 years'\n    }, {\n      value: '7-12',\n      label: '7-12 years'\n    }, {\n      value: '13+',\n      label: '13+ years'\n    }],\n    sources: [{\n      value: 'AI',\n      label: 'AI Generated'\n    }, {\n      value: 'Human',\n      label: 'Human Written'\n    }]\n  };\n\n  // Search function without debounce wrapper\n  const performSearch = async (query, currentFilters) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      setShowResults(false);\n      return;\n    }\n    setIsLoading(true);\n    try {\n      // Build query parameters for your existing ViewSet\n      const params = new URLSearchParams();\n      if (query.trim()) {\n        params.append('search', query);\n      }\n      if (currentFilters.age_group) {\n        params.append('age_group', currentFilters.age_group);\n      }\n      if (currentFilters.source) {\n        params.append('source', currentFilters.source);\n      }\n      const response = await fetch(`http://localhost:8000/api/stories/?${params.toString()}`);\n      const data = await response.json();\n\n      // Handle both paginated and non-paginated responses\n      const results = data.results || data;\n      setSearchResults(results || []);\n      setShowResults(true);\n    } catch (error) {\n      console.error('Search error:', error);\n      setSearchResults([]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Debounced search using useEffect and useRef\n  useEffect(() => {\n    // Clear existing timeout\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    // Set new timeout for debouncing\n    searchTimeoutRef.current = setTimeout(() => {\n      performSearch(searchQuery, filters);\n    }, 300);\n\n    // Cleanup function\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current);\n      }\n    };\n  }, [searchQuery, filters]);\n  const handleInputChange = e => {\n    setSearchQuery(e.target.value);\n  };\n  const handleFilterChange = (filterType, value) => {\n    const newFilters = {\n      ...filters,\n      [filterType]: value\n    };\n    setFilters(newFilters);\n  };\n  const handleStoryClick = async storyId => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/stories/${storyId}/`);\n      const story = await response.json();\n      onStorySelect(story);\n      setShowResults(false);\n      setSearchQuery('');\n    } catch (error) {\n      console.error('Error fetching story:', error);\n    }\n  };\n  const highlightText = (text, query) => {\n    if (!query) return text;\n    const regex = new RegExp(`(${query})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  };\n  const clearFilters = () => {\n    setFilters({\n      age_group: '',\n      source: ''\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: searchQuery,\n        onChange: handleInputChange,\n        placeholder: \"Search stories...\",\n        className: \"search-input\",\n        onFocus: () => searchQuery && setShowResults(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-icon\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19S2 15.194 2 10.5 5.806 2 10.5 2 19 5.806 19 10.5Z\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-filters\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        value: filters.age_group,\n        onChange: e => handleFilterChange('age_group', e.target.value),\n        className: \"filter-select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"All Ages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), availableFilters.age_groups.map(group => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: group.value,\n          children: group.label\n        }, group.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: filters.source,\n        onChange: e => handleFilterChange('source', e.target.value),\n        className: \"filter-select\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"All Sources\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), availableFilters.sources.map(source => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: source.value,\n          children: source.label\n        }, source.value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), (filters.age_group || filters.source) && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: clearFilters,\n        className: \"clear-filters-btn\",\n        children: \"Clear Filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), showResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results\",\n      children: searchResults.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-results\",\n        children: searchQuery ? 'No stories found' : 'Start typing to search...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"results-list\",\n        children: searchResults.map(story => {\n          var _story$story;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            onClick: () => handleStoryClick(story.id),\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"result-title\",\n              dangerouslySetInnerHTML: {\n                __html: highlightText(story.title, searchQuery)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-meta-top\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"result-source\",\n                children: story.source === 'AI' ? 'AI Generated' : 'Human Written'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"result-age\",\n                children: story.age_group === '4-6' ? '4-6 years' : story.age_group === '7-12' ? '7-12 years' : '13+ years'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"result-excerpt\",\n              dangerouslySetInnerHTML: {\n                __html: highlightText(story.story_preview || ((_story$story = story.story) === null || _story$story === void 0 ? void 0 : _story$story.substring(0, 150)) + '...', searchQuery)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-meta\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"result-date\",\n                children: new Date(story.created_at).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this)]\n          }, story.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }, this), showResults && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-overlay\",\n      onClick: () => setShowResults(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchComponent, \"7bxEQ5568qF63g+gFnfl6OztEBA=\");\n_c = SearchComponent;\nexport default SearchComponent;\nvar _c;\n$RefreshReg$(_c, \"SearchComponent\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","SearchComponent","onStorySelect","_s","searchQuery","setSearchQuery","searchResults","setSearchResults","isLoading","setIsLoading","showResults","setShowResults","filters","setFilters","age_group","source","searchTimeoutRef","availableFilters","age_groups","value","label","sources","performSearch","query","currentFilters","trim","params","URLSearchParams","append","response","fetch","toString","data","json","results","error","console","current","clearTimeout","setTimeout","handleInputChange","e","target","handleFilterChange","filterType","newFilters","handleStoryClick","storyId","story","highlightText","text","regex","RegExp","replace","clearFilters","className","children","type","onChange","placeholder","onFocus","fileName","_jsxFileName","lineNumber","columnNumber","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","map","group","onClick","length","_story$story","id","dangerouslySetInnerHTML","__html","title","story_preview","substring","Date","created_at","toLocaleDateString","_c","$RefreshReg$"],"sources":["D:/beyond-the-words/frontend/src/components/SearchComponent.js"],"sourcesContent":["// SearchComponent.js\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport './SearchComponent.css';\r\n\r\nconst SearchComponent = ({ onStorySelect }) => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [filters, setFilters] = useState({ age_group: '', source: '' });\r\n  \r\n  // Use useRef to store the timeout ID\r\n  const searchTimeoutRef = useRef(null);\r\n\r\n  const availableFilters = {\r\n    age_groups: [\r\n      { value: '4-6', label: '4-6 years' },\r\n      { value: '7-12', label: '7-12 years' },\r\n      { value: '13+', label: '13+ years' }\r\n    ],\r\n    sources: [\r\n      { value: 'AI', label: 'AI Generated' },\r\n      { value: 'Human', label: 'Human Written' }\r\n    ]\r\n  };\r\n\r\n  // Search function without debounce wrapper\r\n  const performSearch = async (query, currentFilters) => {\r\n    if (!query.trim()) {\r\n      setSearchResults([]);\r\n      setShowResults(false);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      // Build query parameters for your existing ViewSet\r\n      const params = new URLSearchParams();\r\n      if (query.trim()) {\r\n        params.append('search', query);\r\n      }\r\n      if (currentFilters.age_group) {\r\n        params.append('age_group', currentFilters.age_group);\r\n      }\r\n      if (currentFilters.source) {\r\n        params.append('source', currentFilters.source);\r\n      }\r\n      \r\n      const response = await fetch(\r\n        `http://localhost:8000/api/stories/?${params.toString()}`\r\n      );\r\n      const data = await response.json();\r\n      \r\n      // Handle both paginated and non-paginated responses\r\n      const results = data.results || data;\r\n      setSearchResults(results || []);\r\n      setShowResults(true);\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      setSearchResults([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Debounced search using useEffect and useRef\r\n  useEffect(() => {\r\n    // Clear existing timeout\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    // Set new timeout for debouncing\r\n    searchTimeoutRef.current = setTimeout(() => {\r\n      performSearch(searchQuery, filters);\r\n    }, 300);\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      if (searchTimeoutRef.current) {\r\n        clearTimeout(searchTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [searchQuery, filters]);\r\n\r\n  const handleInputChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handleFilterChange = (filterType, value) => {\r\n    const newFilters = { ...filters, [filterType]: value };\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleStoryClick = async (storyId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:8000/api/stories/${storyId}/`);\r\n      const story = await response.json();\r\n      onStorySelect(story);\r\n      setShowResults(false);\r\n      setSearchQuery('');\r\n    } catch (error) {\r\n      console.error('Error fetching story:', error);\r\n    }\r\n  };\r\n\r\n  const highlightText = (text, query) => {\r\n    if (!query) return text;\r\n    const regex = new RegExp(`(${query})`, 'gi');\r\n    return text.replace(regex, '<mark>$1</mark>');\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setFilters({ age_group: '', source: '' });\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-container\">\r\n      <div className=\"search-input-container\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={handleInputChange}\r\n          placeholder=\"Search stories...\"\r\n          className=\"search-input\"\r\n          onFocus={() => searchQuery && setShowResults(true)}\r\n        />\r\n        <div className=\"search-icon\">\r\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path\r\n              d=\"M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19S2 15.194 2 10.5 5.806 2 10.5 2 19 5.806 19 10.5Z\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n        </div>\r\n        {isLoading && <div className=\"loading-spinner\"></div>}\r\n      </div>\r\n\r\n      {/* Search Filters */}\r\n      <div className=\"search-filters\">\r\n        <select \r\n          value={filters.age_group} \r\n          onChange={(e) => handleFilterChange('age_group', e.target.value)}\r\n          className=\"filter-select\"\r\n        >\r\n          <option value=\"\">All Ages</option>\r\n          {availableFilters.age_groups.map(group => (\r\n            <option key={group.value} value={group.value}>{group.label}</option>\r\n          ))}\r\n        </select>\r\n        \r\n        <select \r\n          value={filters.source} \r\n          onChange={(e) => handleFilterChange('source', e.target.value)}\r\n          className=\"filter-select\"\r\n        >\r\n          <option value=\"\">All Sources</option>\r\n          {availableFilters.sources.map(source => (\r\n            <option key={source.value} value={source.value}>{source.label}</option>\r\n          ))}\r\n        </select>\r\n        \r\n        {(filters.age_group || filters.source) && (\r\n          <button onClick={clearFilters} className=\"clear-filters-btn\">\r\n            Clear Filters\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {showResults && (\r\n        <div className=\"search-results\">\r\n          {searchResults.length === 0 ? (\r\n            <div className=\"no-results\">\r\n              {searchQuery ? 'No stories found' : 'Start typing to search...'}\r\n            </div>\r\n          ) : (\r\n            <div className=\"results-list\">\r\n              {searchResults.map((story) => (\r\n                <div\r\n                  key={story.id}\r\n                  className=\"result-item\"\r\n                  onClick={() => handleStoryClick(story.id)}\r\n                >\r\n                  <h3 \r\n                    className=\"result-title\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: highlightText(story.title, searchQuery)\r\n                    }}\r\n                  />\r\n                  <div className=\"result-meta-top\">\r\n                    <span className=\"result-source\">\r\n                      {story.source === 'AI' ? 'AI Generated' : 'Human Written'}\r\n                    </span>\r\n                    <span className=\"result-age\">\r\n                      {story.age_group === '4-6' ? '4-6 years' : \r\n                       story.age_group === '7-12' ? '7-12 years' : '13+ years'}\r\n                    </span>\r\n                  </div>\r\n                  <p \r\n                    className=\"result-excerpt\"\r\n                    dangerouslySetInnerHTML={{\r\n                      __html: highlightText(story.story_preview || story.story?.substring(0, 150) + '...', searchQuery)\r\n                    }}\r\n                  />\r\n                  <div className=\"result-meta\">\r\n                    <span className=\"result-date\">\r\n                      {new Date(story.created_at).toLocaleDateString()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {showResults && (\r\n        <div \r\n          className=\"search-overlay\"\r\n          onClick={() => setShowResults(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}